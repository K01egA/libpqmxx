image:
- Visual Studio 2015

platform:
- x64

configuration:
- Debug
- Release

environment:
  BOOST_FILENAME_VERSION: 1_63_0
  BOOST_VERSION: 1.63.0
  BOOST_ROOT: "C:\\Libraries\\boost_1_63_0"
  BOOST_LIBRARYDIR: "C:\\Libraries\\boost_1_63_0\\lib64-msvc-14.0"
  GTEST_VERSION: 1.7.0

before_build:
  - git clone https://github.com/google/googletest.git
  - cd googletest
  - git checkout tags/release-%GTEST_VERSION%
  - cmake -G "Visual Studio 14 2015 Win64" -DBUILD_SHARED_LIBS=ON -Dgtest_force_shared_crt=ON .
  - msbuild gtest.sln
  - move Debug lib

services:
  - postgresql

build_script:
  - cd  C:\projects\libpqmxx
  - mkdir build
  - cd build
  - cmake -G "Visual Studio 14 2015 Win64" -D GTEST_ROOT=C:\projects\libpqmxx\googletest ..

build:
  project: C:\projects\libpqmxx\build\postgres-test.sln
